import { forwardRef, Ref } from "react"
import { ProductWithScore } from "../../db/product"
const getSize = (value: number) => {
  if (value < 10) {
    return 12
  }
  if (value < 100) {
    return 7
  }
  if (value < 1000) {
    return 1
  }
  return -5
}
const Label = (
  { product: { score, standardized } }: { product: Exclude<ProductWithScore["score"], null> },
  ref: Ref<SVGSVGElement>,
) => {
  const size = getSize(standardized)
  return (
    <svg xmlns='http://www.w3.org/2000/svg' width='144' height='77' viewBox='0 0 144 77' fill='none' ref={ref}>
      <g>
        <path
          d='M36.2 76.2C16.3 76.2 0.199997 59.1 0.199997 38.1C0.199997 17.1 16.4 0 36.2 0H137.8C140.7 0 143.1 2.4 143.1 5.4V70.7C143.1 73.7 140.7 76.1 137.8 76.1H36.2V76.2Z'
          fill='white'
        />
        <path
          d='M36.2 72.8C18.2 72.8 3.6 57.2 3.6 38.1C3.6 19 18.2 3.4 36.2 3.4H137.8C138.9 3.4 139.7 4.3 139.7 5.4V70.7C139.7 71.8 138.8 72.7 137.8 72.7H36.2V72.8Z'
          stroke='black'
          strokeWidth='0.9946'
          strokeMiterlimit='10'
        />
        <path
          fillRule='evenodd'
          clipRule='evenodd'
          d='M51.6 8.6H50.9V11.8C50.9 12.7 50.4 13.2 49.6 13.2C48.8 13.2 48.3 12.7 48.3 11.8V8.6H47.6V11.7C47.6 13 48.4 13.7 49.6 13.7C50.8 13.7 51.6 13 51.6 11.7V8.6ZM49.2 7.2L48.4 8.2H49L49.6 7.5L50.2 8.2H50.8L50 7.2H49.2ZM40.1 12.4L40.6 12.8C40.1 13.4 39.4 13.8 38.5 13.8C36.9 13.8 35.8 12.6 35.8 11.1C35.8 9.59999 36.9 8.39999 38.5 8.39999C39.4 8.39999 40.2 8.79999 40.6 9.39999L40.1 9.79999C39.8 9.29999 39.2 8.99999 38.5 8.99999C37.4 8.99999 36.5 9.89999 36.5 11C36.5 12.1 37.3 13 38.5 13C39.2 13.2 39.7 12.8 40.1 12.4ZM46.6 11.2C46.6 12.6 45.5 13.9 43.9 13.9C42.3 13.9 41.2 12.7 41.2 11.2C41.2 9.7 42.3 8.5 43.9 8.5C45.5 8.5 46.6 9.7 46.6 11.2ZM45.9 11.2C45.9 10.1 45.1 9.2 43.9 9.2C42.8 9.2 41.9 10.1 41.9 11.2C41.9 12.3 42.7 13.2 43.9 13.2C45 13.2 45.9 12.3 45.9 11.2ZM52.5 8.6H56.5V9.2H54.8V13.6H54.1V9.2H52.4V8.6H52.5ZM62.5 8.6H59.5V13.5H62.5V12.7H60.6V11.4H62.2V10.6H60.6V9.4H62.5V8.6ZM63.7 8.6H65L67.3 12.2V8.6H68.3V13.6H67L64.7 10V13.6H63.7V8.6ZM71.7 12.5L70.2 8.6H69.2L71.1 13.6H72.4L74.3 8.6H73.2L71.7 12.5ZM75.2 8.6H76.2V13.6H75.2V8.6ZM79.3 8.6H77.8V13.6H78.8V11.6H79.3L80.7 13.6H81.9L80.3 11.4C80.8 11.2 81.1 10.7 81.1 10.1C81.1 9.2 80.4 8.6 79.3 8.6ZM78.7 10.8V9.5H79.3C79.7 9.5 80 9.7 80 10.1C80 10.5 79.7 10.8 79.3 10.8H78.7ZM87.4 11.2C87.4 12.6 86.3 13.9 84.7 13.9C83.1 13.9 82 12.7 82 11.2C82 9.7 83.1 8.5 84.7 8.5C86.3 8.5 87.4 9.7 87.4 11.2ZM86.4 11.2C86.4 10.2 85.7 9.5 84.8 9.5C83.8 9.5 83.2 10.2 83.2 11.2C83.2 12.2 83.9 12.9 84.8 12.9C85.7 12.9 86.4 12.1 86.4 11.2ZM89.8 8.6H88.5V13.6H89.5V10L91.8 13.6H93.1V8.6H92.1V12.2L89.8 8.6ZM94.6 8.6H95.9L98.2 12.2V8.6H99.2V13.6H97.9L95.6 10V13.6H94.6V8.6ZM103.7 8.6H100.7V13.5H103.7V12.7H101.8V11.4H103.4V10.6H101.8V9.4H103.7V8.6ZM105 8.6H106.2L107.4 10.7L108.6 8.6H109.9V13.6H108.9V10L107.8 11.9H107.1L106 10V13.6H105V8.6ZM114.4 8.6H111.4V13.5H114.4V12.7H112.5V11.4H114.1V10.6H112.5V9.4H114.4V8.6ZM115.6 8.6H116.9L119.2 12.2V8.6H120.2V13.6H118.9L116.6 10V13.6H115.6V8.6ZM125.4 8.6H121.2V9.5H122.8V13.6H123.8V9.5H125.4V8.6ZM127.2 8.6H128.5L130.4 13.6H129.3L128.8 12.3H126.8L126.3 13.6H125.2L127.2 8.6ZM128.5 11.5L127.8 9.6L127.1 11.5H128.5ZM132.3 8.6H131.3H131.2V13.6H134.2V12.7H132.3V8.6Z'
          fill='black'
        />
        <path
          fillRule='evenodd'
          clipRule='evenodd'
          d='M28.4 14H31.8V17.4H28.4V14ZM24.9 20.8H28.3V24.2H24.9V20.8ZM24.8 37.6V34.3H21.4V30.9H24.8V27.5H21.4V30.9H18V27.5H14.6V30.9H11.2V27.5H7.8V24.1H11.2L11.2 27.5H14.6V24.1L11.2 24.1V21.2C10.1 21 9 20.9 7.8 20.9C6.6 20.9 5.5 21 4.4 21.2C4.35858 21.2 4.28284 21.2172 4.19411 21.2373C4.06863 21.2657 3.91716 21.3 3.8 21.3C1.2 26.5 0 32.3 0 38.5C0 46.8 2.78906 54.5 7.28906 60.8H7.8C9 60.8 10.1 60.7 11.2 60.5C12.4 60.3 13.5 60 14.6 59.6C15.8 59.2 16.8999 58.6 17.9999 58.0001L18 58C18.05 57.95 18.1 57.925 18.15 57.9C18.2 57.875 18.25 57.85 18.3 57.8C19.4 57.1 20.5 56.3 21.4 55.5C21.6 55.35 21.775 55.175 21.95 55C22.125 54.825 22.3 54.65 22.5 54.5C23.4 53.6 24.2 52.6 24.8 51.5C24.9 51.4 25 51.3 25 51.1C25.6 50 26.2 48.9 26.6 47.7C27 46.6 27.3 45.5 27.5 44.3H24.8V40.9H27.9V40.8C27.9 39.7 27.8 38.6 27.6 37.6H24.8ZM14.6 30.9H18V34.3V37.6H14.6V41H11.2V37.6V34.3H14.6V30.9ZM7.8 37.6H4.4V34.3H7.8V37.6ZM14.6 51.2H11.2V47.8H14.6V51.2ZM21.4 41H18V37.7H21.4V41ZM28.2 30.6H31.6V34H28.2V30.6ZM21.4 24.1H18V27.5H21.4V24.1Z'
          fill='black'
        />
        <path
          fillRule='evenodd'
          clipRule='evenodd'
          d='M80.8 45.7C80.8 45.3 81.1 45 81.5 45C81.9 45 82.2 45.3 82.2 45.7C82.2 46.1 81.9 46.4 81.5 46.4C81.1 46.4 80.8 46 80.8 45.7ZM81 47.1H82.1V51.3H81V47.1ZM71.1 47.1H70V53.4H71.1V51C71.4 51.3 71.8 51.5 72.4 51.5C73.8 51.5 74.6 50.4 74.6 49.2C74.6 48 73.8 46.9 72.4 46.9C71.8 46.9 71.4 47.1 71.1 47.4V47.1ZM71.1 49.9V48.6C71.4 48.2 71.8 47.9 72.3 47.9C73 47.9 73.5 48.5 73.5 49.2C73.5 50 73 50.5 72.3 50.5C71.8 50.5 71.4 50.3 71.1 49.9ZM77.7 51.5C79 51.5 80 50.5 80 49.2C80 47.9 79 46.9 77.7 46.9C76.4 46.9 75.4 47.9 75.4 49.2C75.4 50.5 76.3 51.5 77.7 51.5ZM77.7 47.9C78.4 47.9 78.9 48.5 78.9 49.2C78.9 49.9 78.4 50.5 77.7 50.5C77 50.5 76.5 49.9 76.5 49.2C76.5 48.4 77 47.9 77.7 47.9ZM84.4 47.1H83.4V51.3H84.5V48.5C84.5265 48.4735 84.5548 48.4434 84.5852 48.4112L84.5852 48.4112C84.7832 48.2008 85.0664 47.9 85.5 47.9C86 47.9 86.3 48.2 86.3 48.8V51.3H87.4V48.8C87.4 47.5 86.6 46.9 85.7 46.9C85.1 46.9 84.7 47.1 84.4 47.4V47.1ZM88.8 48.1H88V47.1H88.8V46H89.9V47.1H91.2V48.1H89.9V49.8C89.9 50.3 90.2 50.5 90.6 50.5C90.9 50.5 91.1 50.5 91.2 50.4V51.3C91 51.4 90.7 51.4 90.4 51.4C89.3 51.4 88.8 50.8 88.8 49.8V48.1ZM93.5 50.7C93.1 50.7 92.8 50.4 92.5 50.1L91.9 50.6C92.3 51.1 92.8 51.4 93.6 51.4C94.4 51.4 95.1 50.9 95.1 50C95.1 49.1799 94.4137 48.9088 93.8452 48.6843C93.4431 48.5255 93.1 48.39 93.1 48.1C93.1 47.9 93.3 47.7 93.6 47.7C93.9 47.7 94.2 47.9 94.4 48.2L95.1 47.6C94.7 47.2 94.2 46.9 93.5 46.9C92.6 46.9 92 47.4 92 48.2C92 49.0912 92.706 49.3823 93.2791 49.6186C93.6705 49.78 94 49.9159 94 50.2C94 50.5 93.8 50.7 93.5 50.7ZM100.2 46.9C100.8 46.9 101.2 47.1 101.5 47.4V45H102.6V51.3H101.6V51C101.3 51.3 100.9 51.5 100.3 51.5C99 51.5 98.1 50.4 98.1 49.2C98.1 48 98.9 46.9 100.2 46.9ZM100.4 50.5C100.9 50.5 101.3 50.3 101.6 49.9V48.5C101.3 48.1 100.9 47.9 100.4 47.9C99.7 47.9 99.2 48.4 99.2 49.2C99.2 50 99.7 50.5 100.4 50.5ZM104.3 45.5L103.5 47.9H104.5L105.5 45.5H104.3ZM106.2 45.7C106.2 45.3 106.5 45 106.9 45C107.3 45 107.6 45.3 107.6 45.7C107.6 46.1 107.3 46.4 106.9 46.4C106.5 46.4 106.2 46 106.2 45.7ZM106.4 47.1H107.5V51.3H106.4V47.1ZM109.8 47.1H108.7H108.6V51.3H109.7V48.5C109.742 48.4584 109.783 48.4082 109.827 48.3548C109.996 48.151 110.204 47.9 110.6 47.9C111.1 47.9 111.4 48.2 111.4 48.7V51.3H112.5V48.7V48.5C112.7 48.2 112.9 47.9 113.4 47.9C113.9 47.9 114.2 48.2 114.2 48.7V51.3H115.3V48.7C115.3 47.5 114.6 46.9 113.7 46.9C113 46.9 112.6 47.2 112.3 47.6C112 47.1 111.5 46.9 111 46.9C110.5 46.9 110.1 47.1 109.8 47.4V47.1ZM116.5 47.1H117.6V47.4C117.9 47.1 118.3 46.9 118.9 46.9C120.3 46.9 121.1 48 121.1 49.2C121.1 50.4 120.3 51.5 118.9 51.5C118.3 51.5 117.9 51.3 117.6 51V53.4H116.5V47.1ZM117.6 48.6V49.9C117.9 50.3 118.3 50.5 118.8 50.5C119.5 50.5 120 50 120 49.2C120 48.5 119.5 47.9 118.8 47.9C118.3 47.9 117.9 48.2 117.6 48.6ZM123.1 48.9C122.2 49.1 121.7 49.6 121.7 50.2C121.7 51 122.3 51.5 123.1 51.5C123.6 51.5 124.1 51.3 124.4 51V51.4H125.5V48.7C125.5 47.7 124.8 47 123.6 47C122.8 47 122.2 47.3 121.8 47.8L122.6 48.4C122.9 48.1 123.2 47.9 123.6 47.9C124.1 47.9 124.4 48.2 124.4 48.6V48.7L123.1 48.9ZM124.5 50C124.2 50.4 123.9 50.6 123.4 50.6C123 50.6 122.8 50.4 122.9 50.1C122.9 49.9 123.1 49.7 123.5 49.6L124.5 49.4V50ZM129.8 50L130.6 50.6C130.2 51.1 129.6 51.5 128.8 51.5C127.3 51.5 126.4 50.4 126.4 49.2C126.4 48 127.3 46.9 128.8 46.9C129.6 46.9 130.2 47.2 130.6 47.8L129.8 48.4C129.6 48.1 129.3 47.9 128.8 47.9C128.1 47.9 127.6 48.4 127.6 49.2C127.6 50 128.1 50.5 128.8 50.5C129.3 50.5 129.6 50.3 129.8 50ZM131 48.1H131.8V49.8C131.8 50.8 132.3 51.4 133.4 51.4C133.7 51.4 134 51.4 134.2 51.3V50.4C134.1 50.5 133.9 50.5 133.6 50.5C133.2 50.5 132.9 50.3 132.9 49.8V48.1H134.2V47.1H132.9V46H131.8V47.1H131V48.1Z'
          fill='black'
        />
        <rect x={72 + size} y='55' width={62 - size} height='14' rx='3' fill='black' />
        <text fill='white' fontFamily='Marianne' fontSize='9' fontWeight='500' letterSpacing='0em' textAnchor='end'>
          <tspan x='131' y='64.9375'>
            {Math.round(standardized)} pts/100g
          </tspan>
        </text>
        <text fill='black' fontFamily='Marianne' fontSize='34' fontWeight='800' letterSpacing='0em' textAnchor='end'>
          <tspan x='137' y='41.375'>
            {Math.round(score)}
          </tspan>
        </text>
      </g>
    </svg>
  )
}

export default forwardRef(Label)
